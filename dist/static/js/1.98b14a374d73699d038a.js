webpackJsonp([1],{"9bBU":function(e,t,a){a("mClu");var r=a("FeBl").Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},YvL1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("bOdI"),s=a.n(r),n=a("Xxa5"),i=a.n(n),o=a("exGp"),c=a.n(o);function l(e){var t="";return e>0&&(e>86400&&(t+=parseInt(e/86400)+"天",e-=86400*parseInt(e/86400)),e>3600&&(t+=parseInt(e/3600)+"小时",e-=3600*parseInt(e/3600)),e>60&&(t+=parseInt(e/60)+"分钟"),t)}var u,f=a("PJh5"),p=a.n(f),_={name:"WatchTaskVerify",data:function(){return{formater:l,moment:p.a,list:[],showInfo:!1,selectedList:[],search:{page_id:1,page_size:20},selectedIds:[],count:100,operateInfo:{},currInfo:{},showOperate:!1}},mounted:function(){this.queryList()},methods:(u={queryList:function(){var e=this;return c()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.watchTaskList(e.search);case 2:200==(a=t.sent).code?(e.list=a.data.tasks,e.count=a.data.count):e.$message.error(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},showInfoClick:function(e){var t=this;return c()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.showInfo=!0,t.currInfo=e;case 2:case"end":return a.stop()}},a,t)}))()},showOperateInfo:function(e){var t=this;return c()(i.a.mark(function a(){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.watchOperateInfo({task_id:e});case 2:200==(r=a.sent).code?(t.operateInfo=r.data,t.showOperate=!0):t.$message.error(r.msg);case 4:case"end":return a.stop()}},a,t)}))()},handleSelectionChange:function(e){this.selectedList=e},passClick:function(){var e=this;return c()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.selectedIds.length){t.next=3;break}return e.$message.error("请选择要通过的条目"),t.abrupt("return",!1);case 3:return t.next=5,e.$api.verifyWatchTask({agree:!0,reason:"允许",task_ids:e.selectedIds});case 5:200==(a=t.sent).code?(e.$message.success("审核通过"),e.queryList()):e.$message.error(a.msg);case 7:case"end":return t.stop()}},t,e)}))()},handleCurrentChange:function(e){this.search.page_id=e,this.queryList()}},s()(u,"handleSelectionChange",function(e){if(this.selectedList=e,this.selectedList.length>0)for(var t=0;t<this.selectedList.length;t++)this.selectedIds[t]=this.selectedList[t].task_id;else this.selectedIds=[]}),s()(u,"rejectClick",function(e){var t,a=this;this.$prompt("","填写驳回理由",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((t=c()(i.a.mark(function t(r){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.value){t.next=5;break}return a.$message.error("请填写驳回理由"),t.abrupt("return",!1);case 5:return t.next=7,a.$api.verifyWatchTask({agree:!1,reason:r.value,task_ids:[e]});case 7:200==(s=t.sent).code?(a.$message.success("驳回成功"),a.queryList()):a.$message.error(s.msg);case 9:case"end":return t.stop()}},t,a)})),function(e){return t.apply(this,arguments)}))}),s()(u,"checkRowStatus",function(e){return 7!=e.status}),u)},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-title"},[e._v("围观任务审核")]),e._v(" "),a("el-form",{attrs:{inline:""}},[a("el-form-item",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#409EFF","margin-right":"10px"}}),e._v("已选择"+e._s(e.selectedList.length)+"项\n        ")]),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{on:{click:e.passClick}},[e._v("通过所有已选条目")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:e.list},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkRowStatus}}),e._v(" "),a("el-table-column",{attrs:{prop:"publisher_nickname",label:"发布人昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"任务信息",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showInfoClick(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"answer_nickname",label:"完成人昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[4==t.row.status?a("p",[a("i",{staticClass:"tip-icon"}),e._v("待审核")]):e._e(),e._v(" "),7==t.row.status?a("p",[a("i",{staticClass:"tip-icon tip-suc"}),e._v("已通过")]):e._e(),e._v(" "),6==t.row.status?a("p",[a("i",{staticClass:"tip-icon tip-fail"}),e._v("被驳回")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"申请时间",width:"180",sortable:"","sort-by":"applyTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.moment(1e3*t.row.created_at).format("YYYY-MM-DD HH:mm:ss"))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[7!=t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.rejectClick(t.row.task_id)}}},[e._v("驳回")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showOperateInfo(t.row.task_id)}}},[e._v("审核信息")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.search.page_id,"page-size":e.search.page_size,layout:"total, prev, pager, next, jumper",total:e.count},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{staticClass:"check-info",attrs:{title:"审核信息",visible:e.showInfo},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticClass:"flex"},[a("b",{staticClass:"flex-s1"},[e._v("任务标题: "+e._s(e.currInfo.title))]),e._v(" "),a("span",[e._v("发布时间: "+e._s(e.moment(1e3*e.currInfo.created_at).format("YYYY-MM-DD HH:mm:ss")))])]),e._v(" "),a("div",[a("b",[e._v("发布人:")]),e._v(" "+e._s(e.currInfo.publisher_nickname))]),e._v(" "),a("div",[a("b",[e._v("任务内容：")]),e._v(e._s(e.currInfo.content))]),e._v(" "),a("div",[a("b",[e._v("申请截止时间：")]),e._v(e._s(e.moment(1e3*e.currInfo.apply_limit_time).format("YYYY-MM-DD HH:mm:ss")))]),e._v(" "),a("div",[a("b",[e._v("任务金额：")]),e._v(e._s(e.currInfo.price))]),e._v(" "),a("div",[a("b",[e._v("任务时长：")]),e._v(e._s(e.formater(e.currInfo.task_duration)))]),e._v(" "),a("el-table",{attrs:{data:[{publisher_nickname:e.currInfo.publisher_nickname,agree_answer_time:e.currInfo.agree_answer_time}]}},[a("el-table-column",{attrs:{prop:"publisher_nickname",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applyTime",label:"接受时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.moment(1e3*t.row.agree_answer_time).format("YYYY-MM-DD HH:mm:ss"))+"\n                ")]}}])})],1),e._v(" "),a("el-table",{attrs:{data:[{answer:e.currInfo.answer,finished_answer_time:e.currInfo.finished_answer_time}]}},[a("el-table-column",{attrs:{prop:"answer",label:"任务答案"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finished_answer_time",label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.moment(1e3*t.row.finished_answer_time).format("YYYY-MM-DD HH:mm:ss"))+"\n                ")]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看处理信息",visible:e.showOperate},on:{"update:visible":function(t){e.showOperate=t}}},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"操作人"}},[a("div",{staticClass:"txt-right"},[e._v(e._s(e.operateInfo.operate_nickname))])]),e._v(" "),a("el-form-item",{attrs:{label:"操作时间"}},[a("div",{staticClass:"txt-right"},[e._v(e._s(e.moment(1e3*e.operateInfo.operated_at).format("YYYY.MM.DD HH:mm:ss")))])]),e._v(" "),a("el-form-item",{attrs:{label:"处理备注"}},[a("el-input",{attrs:{type:"textarea",disabled:"",value:e.operateInfo.operate_reason}})],1)],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(_,d,!1,function(e){a("ermC")},"data-v-1e32eff1",null);t.default=m.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var r,s=a("C4MV"),n=(r=s)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},ermC:function(e,t){},mClu:function(e,t,a){var r=a("kM2E");r(r.S+r.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=1.98b14a374d73699d038a.js.map