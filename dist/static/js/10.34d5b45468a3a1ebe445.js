webpackJsonp([10],{pWEi:function(e,t){},ytBm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),n=r("exGp"),i=r.n(n),c=r("PJh5"),o=r.n(c),l={name:"Authentication",data:function(){return{total:100,moment:o.a,list:[],showPic:!1,showInfo:!1,selectedList:[],search:{page:1,page_size:10},currInfo:{},currPic:"",selectedUserIds:[]}},mounted:function(){this.queryList()},methods:{passClick:function(){var e=this;return i()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.selectedUserIds.length){t.next=3;break}return e.$message.error("请选择要通过的条目"),t.abrupt("return",!1);case 3:return t.next=5,e.$api.authVerify({agree:!0,reason:"允许",user_ids:e.selectedUserIds});case 5:200==(r=t.sent).code?(e.$message.success("审核通过"),e.queryList()):e.$message.error(r.msg);case 7:case"end":return t.stop()}},t,e)}))()},queryList:function(){var e=this;return i()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.authList(e.search);case 2:200==(r=t.sent).code?(e.list=r.data.data,e.total=r.data.count):401==r.code?e.$router.push({name:"login"}):e.$message.error(r.msg);case 4:case"end":return t.stop()}},t,e)}))()},showInfoClick:function(e,t){var r=this;return i()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.currPic=t,a.next=3,r.$api.operateInfo({user_id:e});case 3:200==(n=a.sent).code?(r.currInfo=n.data,r.showInfo=!0):r.$message.error(n.msg);case 5:case"end":return a.stop()}},a,r)}))()},showPicClick:function(e){var t=this;return i()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.showPic=!0,t.currPic=e;case 2:case"end":return r.stop()}},r,t)}))()},handleSelectionChange:function(e){if(this.selectedList=e,this.selectedList.length>0)for(var t=0;t<this.selectedList.length;t++)this.selectedUserIds[t]=this.selectedList[t].user_id;else this.selectedUserIds=[]},clearSelect:function(){this.$refs.multipleTable.clearSelection()},handleCurrentChange:function(e){this.search.page=e,this.queryList()},rejectClick:function(e){var t=this;return i()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.$prompt("","填写驳回理由",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var r=i()(s.a.mark(function r(a){var n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a.value){r.next=5;break}return t.$message.error("请填写驳回理由"),r.abrupt("return",!1);case 5:return r.next=7,t.$api.authVerify({agree:!1,reason:a.value,user_ids:[e]});case 7:200==(n=r.sent).code?(t.$message.success("驳回成功"),t.queryList()):t.$message.error(n.msg);case 9:case"end":return r.stop()}},r,t)}));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}},r,t)}))()},checkRowStatus:function(e){return 2==e.real_name_status}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"page-title"},[e._v("实名认证审核")]),e._v(" "),r("el-form",{attrs:{inline:""}},[r("el-form-item",[r("i",{staticClass:"el-icon-warning",staticStyle:{color:"#409EFF","margin-right":"10px"}}),e._v("已选择"+e._s(e.selectedList.length)+"项\n        ")]),e._v(" "),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{on:{click:e.passClick}},[e._v("通过所有已选条目")])],1)],1),e._v(" "),r("el-table",{ref:"multipleTable",attrs:{data:e.list},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.checkRowStatus}}),e._v(" "),r("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"id_card_number",label:"身份证号码",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"real_name",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"real_name_status",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.real_name_status?r("p",[r("i",{staticClass:"tip-icon"}),e._v("待认证")]):e._e(),e._v(" "),3==t.row.real_name_status?r("p",[r("i",{staticClass:"tip-icon tip-suc"}),e._v("认证成功")]):e._e(),e._v(" "),4==t.row.real_name_status?r("p",[r("i",{staticClass:"tip-icon tip-fail"}),e._v("认证失败")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.real_name_status?r("p",[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.rejectClick(t.row.user_id)}}},[e._v("驳回")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.showPicClick(t.row.hand_card_pic)}}},[e._v("查看照片")])],1):e._e(),e._v(" "),2!=t.row.real_name_status?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.showInfoClick(t.row.user_id,t.row.hand_card_pic)}}},[e._v("审核信息\n                ")]):e._e()]}}])})],1),e._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.search.page,"page-size":e.search.page_size,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"身份证照片",visible:e.showPic},on:{"update:visible":function(t){e.showPic=t}}},[r("img",{attrs:{src:e.currPic,alt:"",width:"100%"}})]),e._v(" "),r("el-dialog",{attrs:{title:"审核信息",visible:e.showInfo},on:{"update:visible":function(t){e.showInfo=t}}},[r("el-form",{ref:"form"},[r("el-form-item",{attrs:{label:"操作人"}},[r("div",{staticClass:"txt-right"},[e._v(e._s(e.currInfo.operate_nickname))])]),e._v(" "),r("el-form-item",{attrs:{label:"操作时间"}},[e.currInfo.operated_at?r("div",{staticClass:"txt-right"},[e._v(e._s(e.moment(1e3*e.currInfo.operated_at).format("YYYY.MM.DD HH:mm:ss")))]):e._e()]),e._v(" "),r("el-form-item",{attrs:{label:"原因"}},[r("el-input",{attrs:{type:"textarea",disabled:"",value:e.currInfo.operate_reason}})],1),e._v(" "),r("el-form-item",{attrs:{label:"查看照片"}},[r("img",{attrs:{width:"100%",src:e.currPic,alt:""}})])],1)],1)],1)},staticRenderFns:[]};var p=r("VU/8")(l,u,!1,function(e){r("pWEi")},"data-v-ca25d6ac",null);t.default=p.exports}});
//# sourceMappingURL=10.34d5b45468a3a1ebe445.js.map