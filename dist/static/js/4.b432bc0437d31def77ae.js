webpackJsonp([4],{"37cF":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("Xxa5"),i=s.n(e),r=s("exGp"),n=s.n(r),o=s("PJh5"),u=s.n(o),l={components:{ModifyRecord:s("V+xZ").a},name:"CheckTasks",data:function(){return{taskInfoDg:!1,moment:u.a,list:[],search:{page_id:1,page_size:10},showStatusDialog:!1,watchDialog:!1,adminStatus:"",pushedList:[],applyList:[],watchList:[],watchQuery:{user_id:this.$route.query.user_id,page:1,page_size:10},pushedQuery:{user_id:this.$route.query.user_id,page:1,page_size:10},applyQuery:{user_id:this.$route.query.user_id,page:1,page_size:10},watchCount:0,pushedCount:0,applyCount:0,currStatus:-1,currId:"",radioStatus:-1,currTask:{}}},mounted:function(){this.initList()},methods:{showInfoClick:function(t){this.currTask=t,this.taskInfoDg=!0},initList:function(){var t=this;return n()(i.a.mark(function a(){var s,e;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.getPushedList(t.pushedQuery);case 2:return s=a.sent,a.next=5,t.$api.getApplyList(t.applyQuery);case 5:e=a.sent,200==s.code&&200==e.code?(t.pushedList=s.data.tasks,t.pushedCount=s.data.count,t.applyList=e.data.tasks,t.applyCount=e.data.count):t.$message.error(s.msg+","+e.msg);case 7:case"end":return a.stop()}},a,t)}))()},pushCurrentChange:function(t){this.pushedQuery.page=t,this.initList()},applyCurrentChange:function(t){this.applyQuery.page=t,this.initList()},watchCurrentChange:function(t){this.watchQuery.page=t,this.initList()},changeStatus:function(t){this.currStatus=t.status,this.radioStatus=this.currStatus,this.currId=t.task_id,this.showStatusDialog=!0},saveClick:function(){var t=this;return n()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.changeTaskStatus({task_id:t.currId,status:t.radioStatus});case 2:200==(s=a.sent).code?(t.showStatusDialog=!1,t.initList()):t.$message.error(s.msg);case 4:case"end":return a.stop()}},a,t)}))()}}},c={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page"},[s("div",{staticClass:"posted-tasks"},[s("div",{staticClass:"page-title"},[t._v("发布的任务")]),t._v(" "),s("el-table",{attrs:{data:t.pushedList}},[s("el-table-column",{attrs:{label:"任务标题",prop:"title"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务内容",prop:"content"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.showInfoClick(a.row)}}},[t._v(t._s(a.row.content))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"发布时间",prop:"publish_time",sortable:"",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务状态",prop:"status",sortable:"","sort-by":"status"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("默认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),1==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("待申请\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("进行中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),3==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("已完成待确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),4==a.row.status?s("p",[s("i",{staticClass:"tip-icon tip-suc"}),t._v("已完成已确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),5==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("申诉中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),6==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("关闭\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status||2==a.row.status||5==a.row.status||7==a.row.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.changeStatus(a.row)}}},[t._v("修改任务状态")]):t._e()]}}])})],1),t._v(" "),t.pushedCount>0?s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","current-page":t.pushedQuery.page,"page-size":t.pushedQuery.page_size,layout:"total, prev, pager, next, jumper",total:t.pushedCount},on:{"current-change":t.pushCurrentChange}})],1):t._e()],1),t._v(" "),s("el-dialog",{attrs:{visible:t.taskInfoDg,title:"任务详情"},on:{"update:visible":function(a){t.taskInfoDg=a}}},[s("el-form",[s("el-form-item",{attrs:{label:"任务属性"}},[s("div",{staticClass:"txt-right"},[t._v(t._s("cloud"==t.currTask.task_type?"云任务":"附近"))])]),t._v(" "),s("el-form-item",{attrs:{label:"任务金额"}},[s("div",{staticClass:"txt-right"},[t._v(t._s(t.currTask.price))])]),t._v(" "),s("el-form-item",{attrs:{label:"任务完成人"}},[s("div",{staticClass:"txt-right"})]),t._v(" "),s("el-form-item",{attrs:{label:"任务内容"}},[s("div",{staticClass:"txt-right",staticStyle:{"padding-left":"16px"}},[t._v(t._s(t.currTask.content))])])],1)],1),t._v(" "),s("div",{staticClass:"apply-tasks"},[s("div",{staticClass:"page-title",staticStyle:{"margin-top":"20px"}},[t._v("申请的任务")]),t._v(" "),s("el-table",{attrs:{data:t.applyList}},[s("el-table-column",{attrs:{label:"任务标题",prop:"title"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务内容",prop:"content"}}),t._v(" "),s("el-table-column",{attrs:{label:"申请时间",prop:"publish_time",sortable:"",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务状态",prop:"status",sortable:"","sort-by":"status"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("默认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),1==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("待申请\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("进行中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),3==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("已完成待确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),4==a.row.status?s("p",[s("i",{staticClass:"tip-icon tip-suc"}),t._v("已完成已确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),5==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("申诉中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),6==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("关闭\n\t\t\t\t\t\t")]):t._e(),t._v(" "),7==a.row.status?s("p",[s("i",{staticClass:"tip-icon tip-suc"}),t._v("开放围观\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status||2==a.row.status||5==a.row.status||7==a.row.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.changeStatus(a.row)}}},[t._v("修改任务状态")]):t._e()]}}])})],1),t._v(" "),t.applyCount>0?s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","current-page":t.applyQuery.page,"page-size":t.applyQuery.page_size,layout:"total, prev, pager, next, jumper",total:t.applyCount},on:{"current-change":t.applyCurrentChange}})],1):t._e()],1),t._v(" "),s("el-dialog",{attrs:{title:"修改任务状态",visible:t.showStatusDialog},on:{"update:visible":function(a){t.showStatusDialog=a}}},[s("el-radio-group",{model:{value:t.radioStatus,callback:function(a){t.radioStatus=a},expression:"radioStatus"}},[1==t.currStatus||2==t.currStatus||5==t.currStatus?s("el-radio",{attrs:{label:4}},[t._v("已完成")]):t._e(),t._v(" "),s("el-radio",{attrs:{label:6}},[t._v("关闭")])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"50px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveClick}},[t._v("确认")]),t._v(" "),s("el-button",{on:{click:function(a){t.showStatusDialog=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(l,c,!1,function(t){s("w0rJ")},"data-v-966666a4",null);a.default=p.exports},"V+xZ":function(t,a,s){"use strict";var e=s("PJh5"),i=s.n(e),r={name:"ModifyRecord",props:["recordList"],data:function(){return{moment:i.a}},mounted:function(){}},n={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-title",staticStyle:{"margin-top":"20px"}},[t._v("操作记录")]),t._v(" "),s("el-table",{attrs:{data:t.recordList,stripe:""}},[s("el-table-column",{attrs:{prop:"operated_at",label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v(t._s(t.moment(1e3*a.row.operated_at).format("YYYY.MM.DD")))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"operate_nickname",label:"修改人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"operate_reason",label:"修改原因"}}),t._v(" "),s("el-table-column",{attrs:{prop:"content",label:"修改内容"}})],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,n,!1,function(t){s("sYYf")},"data-v-010c2dac",null);a.a=o.exports},sYYf:function(t,a){},w0rJ:function(t,a){}});
//# sourceMappingURL=4.b432bc0437d31def77ae.js.map