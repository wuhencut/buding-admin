webpackJsonp([14],{LHkh:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("Xxa5"),r=s.n(e),i=s("exGp"),n=s.n(i),o=(s("PJh5"),{name:"NearTaskDeal",data:function(){return{showStatusDialog:!1,detailDg:!1,currTask:{doing_user_info:{}},total:10,list:[],search:{page:1,page_size:10}}},mounted:function(){this.queryList()},methods:{showTaskDetail:function(t){var a=this;return n()(r.a.mark(function s(){var e;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.$api.getNearTaskInfo({task_id:t});case 2:200==(e=s.sent).code?(a.currTask=e.data,a.detailDg=!0):a.$message.error(e.msg);case 4:case"end":return s.stop()}},s,a)}))()},queryList:function(){var t=this;return n()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.getNearTaskList(t.search);case 2:200==(s=a.sent).code&&(t.list=s.data.list,t.total=s.data.count);case 4:case"end":return a.stop()}},a,t)}))()},changeStatus:function(t){this.currStatus=t.status,this.radioStatus=this.currStatus,this.currId=t.task_id,this.showStatusDialog=!0},handelCurrentChange:function(t){this.search.page=t,this.queryList()},saveClick:function(){var t=this;return n()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.changeTaskStatus({task_id:t.currId,status:t.radioStatus});case 2:200==(s=a.sent).code?(t.showStatusDialog=!1,t.initList()):t.$message.error(s.msg);case 4:case"end":return a.stop()}},a,t)}))()}}}),l={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"posted-tasks"},[s("div",{staticClass:"page-title"},[t._v("附近的任务")]),t._v(" "),s("el-table",{attrs:{data:t.list}},[s("el-table-column",{attrs:{label:"地理位置",prop:"address",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务标题",prop:"title",width:"130"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.showTaskDetail(a.row.task_id)}}},[t._v(t._s(a.row.title))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"发布人",sortable:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n            "+t._s(a.row.publish_user_info.user_name)+"\n          ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"发布时间",prop:"create_time",sortable:"",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"任务状态",prop:"status",sortable:"","sort-by":"status"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("默认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),1==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("待申请\n\t\t\t\t\t\t")]):t._e(),t._v(" "),2==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("进行中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),3==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("已完成待确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),4==a.row.status?s("p",[s("i",{staticClass:"tip-icon tip-suc"}),t._v("已完成已确认\n\t\t\t\t\t\t")]):t._e(),t._v(" "),5==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("申诉中\n\t\t\t\t\t\t")]):t._e(),t._v(" "),6==a.row.status?s("p",[s("i",{staticClass:"tip-icon"}),t._v("关闭\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status||2==a.row.status||5==a.row.status||7==a.row.status?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.changeStatus(a.row)}}},[t._v("修改任务状态")]):t._e()]}}])})],1),t._v(" "),t.total>0?s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"","current-page":t.search.page,"page-size":t.search.page_size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handelCurrentChange}})],1):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.detailDg,title:"任务详情"},on:{"update:visible":function(a){t.detailDg=a}}},[s("el-form",[s("el-form-item",{attrs:{label:"任务金额"}},[s("div",{staticClass:"txt-right"},[t._v(t._s(t.currTask.price))])]),t._v(" "),s("el-form-item",{attrs:{label:"任务标题"}},[s("div",{staticClass:"txt-right"},[t._v(t._s(t.currTask.title))])]),t._v(" "),s("el-form-item",{attrs:{label:"任务完成人"}},[s("div",{staticClass:"txt-right"},[t._v(t._s(t.currTask.doing_user_info.user_name))])]),t._v(" "),s("el-form-item",{attrs:{label:"内务内容"}},[s("div",{staticClass:"txt-right"},[t._v(t._s(t.currTask.content))])])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"修改任务状态",visible:t.showStatusDialog},on:{"update:visible":function(a){t.showStatusDialog=a}}},[s("el-radio-group",{model:{value:t.radioStatus,callback:function(a){t.radioStatus=a},expression:"radioStatus"}},[1==t.currStatus||2==t.currStatus||5==t.currStatus?s("el-radio",{attrs:{label:4}},[t._v("已完成")]):t._e(),t._v(" "),s("el-radio",{attrs:{label:6}},[t._v("关闭")])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"50px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveClick}},[t._v("确认")]),t._v(" "),s("el-button",{on:{click:function(a){t.showStatusDialog=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(o,l,!1,function(t){s("j3hQ")},"data-v-4a6c5f4e",null);a.default=u.exports},j3hQ:function(t,a){}});
//# sourceMappingURL=14.bdbd736699ab7bc0d7b4.js.map