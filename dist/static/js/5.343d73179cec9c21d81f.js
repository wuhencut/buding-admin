webpackJsonp([5],{"V+xZ":function(e,t,a){"use strict";var r=a("PJh5"),n=a.n(r),s={name:"ModifyRecord",props:["recordList"],data:function(){return{moment:n.a}},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-title",staticStyle:{"margin-top":"20px"}},[e._v("操作记录")]),e._v(" "),a("el-table",{attrs:{data:e.recordList,stripe:""}},[a("el-table-column",{attrs:{prop:"operated_at",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.moment(1e3*t.row.operated_at).format("YYYY.MM.DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_nickname",label:"修改人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_reason",label:"修改原因"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"修改内容"}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(e){a("sYYf")},"data-v-010c2dac",null);t.a=i.exports},aO6M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),o=a.n(s),i=(a("w0Ro"),{components:{ModifyRecord:a("V+xZ").a},name:"categorySet",data:function(){return{list:[],categories:[],operateList:[],showAdd:!1,categoryName:"",reason:""}},mounted:function(){this.queryList(),this.operateRecord()},methods:{addCategory:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.showAdd=!0,e.categoryName&&e.reason){t.next=4;break}return e.$message.error("请填写分类名和原因"),t.abrupt("return",!1);case 4:return t.next=6,e.$api.addCategory({category_name:e.categoryName,reason:e.reason});case 6:200==(a=t.sent).code?(e.$message.success("添加成功"),e.queryList(),e.operateRecord(),e.showAdd=!1):e.$message.error(a.msg);case 8:case"end":return t.stop()}},t,e)}))()},queryList:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.categoryList();case 2:200==(a=t.sent).code?e.list=a.data:e.$message.error(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},operateRecord:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.categoryOperateRecord();case 2:200==(a=t.sent).code?e.operateList=a.data:e.$message.error(a.msg);case 4:case"end":return t.stop()}},t,e)}))()}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[e._m(0),e._v(" "),a("div",{staticClass:"categories"},e._l(e.list,function(t,r){return a("el-tag",{key:r,staticStyle:{"margin-right":"20px"}},[e._v(e._s(t.name))])}),1),e._v(" "),a("div",{staticClass:"footer",staticStyle:{margin:"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdd=!0}}},[e._v("添加")])],1),e._v(" "),a("modify-record",{attrs:{recordList:e.operateList}}),e._v(" "),a("el-dialog",{attrs:{visible:e.showAdd,title:"添加分类"},on:{"update:visible":function(t){e.showAdd=t}}},[a("el-form",{attrs:{"label-width":"120px;","label-position":"left"}},[a("el-form-item",{attrs:{label:"分类："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"原因："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.showAdd=!1,e.categoryName="",e.reason=""}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addCategory}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-title"},[t("b",[this._v("设置分类")])])}]};var l=a("VU/8")(i,c,!1,function(e){a("uK5G")},null,null);t.default=l.exports},sYYf:function(e,t){},uK5G:function(e,t){}});
//# sourceMappingURL=5.343d73179cec9c21d81f.js.map